<section class="sponsors-section-v2">
    <div class="sponsors-header">
        <h2 class="sponsors-title-v2">Quienes Impulsan Nuestra Causa</h2>
        <p class="sponsors-subtitle-v2">
            Nuestro más profundo agradecimiento a estos aliados que, con su valioso aporte, hacen posible que esta plataforma siga conectando y ayudando a miles de paraguayos.
        </p>
    </div>
    
    <div class="sponsors-carousel-wrapper">
        <div class="sponsors-scroll-container" id="sponsors-container">
            <% /* El contenido se generará con JavaScript */ %>
        </div>
    </div>

    <div class="sponsors-cta">
         <a href="/sponsors/apply" class="btn btn-primary">Suma tu Apoyo Aquí</a>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const sponsorsData = <%- JSON.stringify(typeof activeSponsors !== 'undefined' ? activeSponsors : []) %>;
    const container = document.getElementById('sponsors-container');
    const wrapper = container.parentElement; // Esto selecciona a .sponsors-carousel-wrapper

    if (sponsorsData.length > 0) {
        let content = '';
        sponsorsData.forEach(sponsor => {
            content += `
                <div class="sponsor-card">
                    <a href="${sponsor.companyWebsite}" target="_blank" rel="noopener noreferrer" title="${sponsor.companyName}">
                        <img src="${sponsor.companyLogo.replace('/upload/', '/upload/h_90,c_limit,q_auto,f_auto/')}" alt="Logo ${sponsor.companyName}">
                    </a>
                </div>
            `;
        });

        // Establecemos un umbral. Si hay más de 4 patrocinadores, se activará el deslizamiento.
        const SCROLL_THRESHOLD = 4;

        if (sponsorsData.length > SCROLL_THRESHOLD) {
            // LÓGICA DE DESLIZAMIENTO
            wrapper.classList.add('scrolling');
            
            // Duplicamos el contenido para un bucle infinito y fluido
            container.innerHTML = content + content;
            
            // Ajustamos la velocidad de la animación según la cantidad de logos
            const duration = sponsorsData.length * 5; // 5 segundos por patrocinador
            container.style.animation = `scroll ${duration}s linear infinite`;

        } else {
            // LÓGICA ESTÁTICA
            // Simplemente mostramos los logos. El CSS se encargará de centrarlos.
            container.innerHTML = content;
        }

    } else {
        // Si no hay patrocinadores, mostramos un mensaje
        container.innerHTML = `
            <div class="no-sponsors-message">
                <h4>¡Conviértete en el primer aliado de nuestra causa!</h4>
                <p>Tu apoyo puede ser el impulso que necesitamos.</p>
            </div>
        `;
    }
});
</script>